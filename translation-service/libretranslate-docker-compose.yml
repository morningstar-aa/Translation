version: '3.8'

services:
  libretranslate:
    image: libretranslate/libretranslate:latest
    container_name: libretranslate
    restart: unless-stopped
    ports:
      - "5005:5000"
    environment:
      # 只加载中英文语言包（节省空间和内存）
      - LT_LOAD_ONLY=en,zh
      # 禁用文件翻译
      - LT_DISABLE_FILES_TRANSLATION=true
      # 禁用建议
      - LT_SUGGESTIONS=false
      # 禁用前端（只用 API）
      # - LT_FRONTEND_LANGUAGE_SOURCE=en
      # - LT_FRONTEND_LANGUAGE_TARGET=zh
    volumes:
      - libretranslate_data:/home/libretranslate/.local/share
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5000/languages"]
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  libretranslate_data:
